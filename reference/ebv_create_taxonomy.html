<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create an EBV netCDF with taxonomy — ebv_create_taxonomy • ebvcube</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create an EBV netCDF with taxonomy — ebv_create_taxonomy"><meta property="og:description" content="Create the core structure of the EBV netCDF based on the json
from the EBV Data Portal. Additionally,
you can add the hierarchy of the taxonomy. This is not provided in the
ebv_create() function. Use the ebv_create() function
if your dataset holds no taxonomic information. Data will be added
afterwards using ebv_add_data()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ebvcube</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../news/index.html">NEWS</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../CONTRIBUTING.html">Contributing</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/LuiseQuoss/ebvcube" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/" class="external-link">
    <span class="fa fa-facebook"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create an EBV netCDF with taxonomy</h1>
    <small class="dont-index">Source: <a href="https://github.com/LuiseQuoss/ebvcube/blob/HEAD/R/ebv_create_taxonomy.R" class="external-link"><code>R/ebv_create_taxonomy.R</code></a></small>
    <div class="hidden name"><code>ebv_create_taxonomy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create the core structure of the EBV netCDF based on the json
from the <a href="https://portal.geobon.org" class="external-link">EBV Data Portal</a>. Additionally,
you can add the hierarchy of the taxonomy. This is not provided in the
<code><a href="ebv_create.html">ebv_create()</a></code> function. Use the <code><a href="ebv_create.html">ebv_create()</a></code> function
if your dataset holds no taxonomic information. Data will be added
afterwards using <code><a href="ebv_add_data.html">ebv_add_data()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ebv_create_taxonomy</span><span class="op">(</span></span>
<span>  <span class="va">jsonpath</span>,</span>
<span>  <span class="va">outputpath</span>,</span>
<span>  <span class="va">taxonomy</span>,</span>
<span>  lsid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  epsg <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="fl">90</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  timesteps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fillvalue <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prec <span class="op">=</span> <span class="st">"double"</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">","</span>,</span>
<span>  force_4D <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>jsonpath</dt>
<dd><p>Character. Path to the json file downloaded from the EBV Data
Portal. Login to the page and click on 'Uploads' and 'New Upload' to start
the process.</p></dd>


<dt>outputpath</dt>
<dd><p>Character. Set path where the netCDF file should be created.</p></dd>


<dt>taxonomy</dt>
<dd><p>Character. Path to the csv table holding the taxonomy.
Default: comma-separated delimiter, else change the <code>sep</code> argument
accordingly. The csv needs to have the following structure: The header
displays the names of the different taxon levels ordered from the highest
level to the lowest, e.g. "Order", "Family", "Genus", "Species". The last
column (if <code>lsid</code>=FALSE) is equivalent to the <code>entity</code> argument in the
<code><a href="ebv_create.html">ebv_create()</a></code> function. Each row of the csv corresponds to a
unique entity. In case the <code>lsid</code> argument (see below) is set to the TRUE,
this table gets an additional last column which holds the lsid per entity -
in this case the second last column contains the entity names, e.g. the
following column order: "Order", "Family", "Genus", "Species", "lsid".</p></dd>


<dt>lsid</dt>
<dd><p>Logical. Default: FALSE. Set to TRUE if the last column in your
taxonomy csv file defines the lsid for each entity. For more info check
<a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#taxon-names-and-identifiers" class="external-link">CF
convention 1.8: Taxon Names and Identifiers</a>.</p></dd>


<dt>epsg</dt>
<dd><p>Integer. Default: 4326 (WGS84). Defines the coordinate reference
system via the corresponding epsg code.</p></dd>


<dt>extent</dt>
<dd><p>Numeric. Default: c(-180,180,-90,90). Defines the extent of the
data: c(xmin, xmax, ymin, ymax).</p></dd>


<dt>resolution</dt>
<dd><p>Numerical. Vector of two numerical values defining the
longitudinal and latitudinal resolution of the pixel: c(lon,lat).</p></dd>


<dt>timesteps</dt>
<dd><p>Character. Vector of the timesteps in the dataset. Default:
NULL - in this case the time will be calculated from the start-, endpoint
and temporal resolution given in the metadata file (json). Else, the dates
must be given in in ISO format 'YYYY-MM-DD' or shortened 'YYYY' in case of
yearly timesteps.</p></dd>


<dt>fillvalue</dt>
<dd><p>Numeric. Value of the missing data in the array. Not
mandatory but should be defined!</p></dd>


<dt>prec</dt>
<dd><p>Character. Default: 'double'. Precision of the data set. Valid
options: 'short' 'integer' 'float' 'double' 'char' 'byte'.</p></dd>


<dt>sep</dt>
<dd><p>Character. Default: ','. If the delimiter of the csv specifying the
entity-names differs from the default, indicate here.</p></dd>


<dt>force_4D</dt>
<dd><p>Logical. Default is TRUE. If the argument is TRUE, there will
be 4D cubes (lon, lat, time, entity) per metric. If this argument is changed
to FALSE, there will be 3D cubes (lon, lat, time) per entity (per metric).
So the latter yields a higher amount of cubes and does not bundle all
information per metric. In the future the standard will be restricted to the
4D version. Recommendation: go with the 4D cubes!</p></dd>


<dt>overwrite</dt>
<dd><p>Logical. Default: FALSE. Set to TRUE to overwrite the output
file defined by 'outputpath'</p></dd>


<dt>verbose</dt>
<dd><p>Logical. Default: TRUE. Turn off additional prints by setting
it to FALSE. #' @note To check out the results take a look at your netCDF
file with <a href="https://www.giss.nasa.gov/tools/panoply/" class="external-link">Panoply</a> provided
by the NASA.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Creates the netCDF file at the 'outputpath' location including the
taxonomy information.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>You can check the taxonomy info with <code><a href="ebv_properties.html">ebv_properties()</a></code> in the slot
'general' under the name 'taxonomy' and 'taxonomy_lsid'.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#set path to JSON file</span></span></span>
<span class="r-in"><span><span class="va">json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"extdata/testdata"</span>,<span class="st">"5.json"</span><span class="op">)</span>, package<span class="op">=</span><span class="st">"ebvcube"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#set output path of the new EBV netCDF</span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext<span class="op">=</span><span class="st">'.nc'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#set path to the csv holding the taxonomy names</span></span></span>
<span class="r-in"><span><span class="va">taxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">'ebvcube'</span><span class="op">)</span>,<span class="st">"extdata/testdata"</span>,<span class="st">"id5_entities.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#create new EBV netCDF with taxonomy</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">ebv_create_taxonomy</span><span class="op">(</span>jsonpath <span class="op">=</span> <span class="va">json</span>, outputpath <span class="op">=</span> <span class="va">out</span>, taxonomy <span class="op">=</span> <span class="va">taxonomy</span>,</span></span>
<span class="r-in"><span>           fillvalue <span class="op">=</span> <span class="op">-</span><span class="fl">127</span>, resolution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.25</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#remove file</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Luise Quoss, Nestor Fernandez, Christian Langer, Jose Valdez, Henrique Miguel Pereira.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

